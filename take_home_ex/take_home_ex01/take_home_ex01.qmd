---
title: "Take-Home Exercise 1"
author: "Chai Zhixuan"
date: 2024-01-13
date-format: long
date-modified: "last-modified"
---

# 1 Overview

Social capital is a crucial element in the educational landscape, intertwining with the functioning and success of schools. Defined as the networks, relationships, and social bonds that individuals and communities build, social capital plays a pivotal role in shaping the educational experiences of students. In the context of schools, it manifests through the connections between students, teachers, parents, and the wider community.

# 2 Getting Started

## 2.1 Objectives

[PISA](https://www.oecd.org/pisa/) is the OECD's Programme for International Student Assessment. PISA measures 15-year-olds\' ability to use their reading, mathematics and science knowledge and skills to meet real-life challenges.

Initial results of PISA 2022 were released on 5 December 2023. 81 countries and economies took part in PISA 2022.

[PISA 2022](https://www.oecd-ilibrary.org/docserver/18f73e4f-en.pdf?expires=1705144524&id=id&accname=guest&checksum=56D745B64C41665A554C01DDD7827E1A) shows that Singapore scored significantly higher than all other participating
countries/economies in mathematics (575 points), reading (543 points) and science (561 points).

In this take-home exercise, I will demonstrate on how to deploy appropriate **Exploratory Data Analysis (EDA)** methods and **ggplot2** functions to reveal:

-   the distribution of Singapore students' performance in mathematics, reading, and science, and

-   the relationship between these performances with schools, gender and socioeconomic status of the students.

A total of not more than 5 EDA will be created in this take-home exercise. This study will use the results from PISA 2022.

## 2.2 The study area

This will be in the context of Singapore. Survey questions are found in this [link](https://www.oecd.org/pisa/data/2022database/CY8_202111_QST_MS_STQ_CBA_NoNotes.pdf).

## **2.3 Setting the Analytical Tools**

I will use the following package:

1.  [haven](https://cran.r-project.org/web/packages/haven/index.html): Import and Export 'SPSS', 'Stata' and 'SAS' Files

```{r}
pacman::p_load(ggrepel, patchwork, 
               ggthemes, hrbrthemes,
               tidyverse, haven) 
```

# **3 Data Preparation**

I will import the data from [here](https://www.oecd.org/pisa/data/2022database/)

Step by Step on how to obtain the data is as shown below:

1.  Go to <https://www.oecd.org/pisa/data/2022database/>
2.  Scroll down and download the **Student questionnaire data file** only. Please ensure that the file downloaded is from the SAS (TM) Data Files (compressed) section.

![](images/1-01.PNG)

I will first import the file downloaded from PICA.

```{r}
#| eval: false
stu.qqq <- read_sas("data/cy08msp_stu_qqq.sas7bdat")
```

I will filter the data to Singapore.

```{r}
#| eval: false
stu_qqq_SG <- stu.qqq %>%
  filter(CNT == "SGP")
```

I will save the data to rds format.

```{r}
#| eval: false
write_rds(stu_qqq_SG,
          "data/stu_qqq_SG.rds")
```

I will read back the rds file.

```{r}
stu_qqq_SG <- read_rds("data/stu_qqq_SG.rds")
```

## **3.1 Summary Statistics**

I will first have a look at the data structure

```{r}
str(stu_qqq_SG)
```

There are are total of 6606 rows and 1279 columns.

Further filter of data is needed.

## **3.2 Extracting the study data**

I will extract the following:

1.  Gender: **ST004D01T**

    ![](images/Male or Females.PNG){width="340"}

2.  Socioeconomic Aspect

    a\. Having a room of their own (Refer to image below): **ST250Q01JA**

    b\. A computer: **ST250Q02JA**

    ![](images/Sociaeconomic.PNG){width="487"}

3.  Expected Education Level: **EXPECEDU**

    ![](images/edu.PNG){width="536"}

4.  Math score - **PV1MATH** to **PV10MATH**

5.  Science score - **PV1SCIE** to **PV10SCIE**

6.  Reading score - **PV1READ** to **PV10READ**

```{r}

stu_qqq_SG_1 <- stu_qqq_SG %>%
select(ST004D01T,ST250Q01JA, ST250Q02JA,EXPECEDU, PV1MATH, PV2MATH,PV3MATH,PV4MATH,PV5MATH,PV6MATH,PV7MATH ,PV8MATH,PV9MATH,PV10MATH,PV1SCIE,PV2SCIE,PV3SCIE,PV4SCIE,PV5SCIE,PV6SCIE,PV7SCIE,PV8SCIE,PV9SCIE,PV10SCIE,PV1READ,PV2READ,PV3READ,PV4READ,PV5READ,PV6READ,PV7READ,PV8READ,PV9READ,PV10READ)

```

I will save the data to rds format as well:

```{r}
#| eval: false
write_rds(stu_qqq_SG_1,
          "data/stu_qqq_SG_1.rds")
```

I will read back the rds file.

```{r}
stu_qqq_SG_1 <- read_rds("data/stu_qqq_SG_1.rds")
```

```{r}
glimpse(stu_qqq_SG_1)
```

# 4 Data Wrangling

## 4.1 Average of plausible values from subjects

10 different values are given for the different subjects. I will need to find the average of [plausible values](https://nces.ed.gov/nationsreportcard/tdw/analysis/est_pv_individual.aspx).

### 4.1.1 Math

```{r}
#| eval: false

stu_qqq_SG_1 <- stu_qqq_SG_1 %>%
  mutate(math_average = rowMeans(across(c(PV1MATH, PV2MATH, PV3MATH,PV4MATH,PV5MATH,PV6MATH,PV7MATH,PV8MATH,PV9MATH,PV10MATH))))
```

### 4.1.2 Science

```{r}
#| eval: false

stu_qqq_SG_1 <- stu_qqq_SG_1 %>%
  mutate(sci_average = rowMeans(across(c(PV1SCIE, PV2SCIE, PV3SCIE,PV4SCIE,PV5SCIE,PV6SCIE,PV7SCIE,PV8SCIE,PV9SCIE,PV10SCIE))))
```

### 4.1.3 Reading

```{r}
#| eval: false

stu_qqq_SG_1 <- stu_qqq_SG_1 %>%
  mutate(read_average = rowMeans(across(c(PV1READ, PV2READ, PV3READ, PV4READ, PV5READ, PV6READ, PV7READ, PV8READ, PV9READ, PV10READ))))
```

## 4.2 Rename of column headings

I will rename some column for better reference

```{r}
#| eval: false

stu_qqq_SG_1 <- stu_qqq_SG_1 %>%
  rename(gender = ST004D01T, having_a_room = ST250Q01JA, having_a_laptop = ST250Q02JA, expected_edu = EXPECEDU)
```

I will now filter to the columns I want

```{r}
#| eval: false

stu_qqq_SG_2 <- stu_qqq_SG_1 %>%
select(gender, having_a_room, having_a_laptop, expected_edu, math_average, sci_average, read_average)
```

I will save it do rds format as well

```{r}
#| eval: false

write_rds(stu_qqq_SG_2,
          "data/stu_qqq_SG_2.rds")

```

I will import back the rds file

```{r}
stu_qqq_SG_2 <- read_rds("data/stu_qqq_SG_2.rds")
```

```{r}
glimpse(stu_qqq_SG_2)
```

# 5 Exploratory Data Analysis

## 5.1 Histograms - subjects

## 5.2 Boxplots - Subjects

## 5.3 Mosaic plot - Gender and Room, Gender and Laptop, Gender and School

## 5.4 Bar graph - Gender and Subjects, Room and Subjects, School and Subjects, Laptop and Subjects
